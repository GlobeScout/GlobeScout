<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard</title>
</head>
<body>
// 🔐 LOGIN-FORMULAR
const loginForm    = document.getElementById('login-form')
const loginMessage = document.getElementById('login-message')

loginForm.addEventListener('submit', async (e) => {
  e.preventDefault()

  const email    = document.getElementById('login-email').value
  const password = document.getElementById('login-password').value

  loginMessage.textContent = '⏳ Anmeldung läuft...'
  loginMessage.style.color = 'gray'

  const { data, error } = await supabase.auth.signInWithPassword({ email, password })

  if (error) {
    loginMessage.textContent = '❌ Fehler: ' + error.message
    loginMessage.style.color = 'red'
    return
  }

  // ✅ Login erfolgreich
  loginMessage.textContent = '✅ Login erfolgreich!'
  loginMessage.style.color = 'green'
  console.log('👤 Angemeldet als:', data.user)

  /* 🔀 Weiterleitung:
     Warte kurz (500 ms), damit der Nutzer die Erfolgsmeldung sieht,
     und lade anschließend eine neue, leere Seite.
     Ersetze "dashboard.html" durch den Pfad deiner Wahl. */
  setTimeout(() => {
    window.location.href = 'dashboard.html'
    // Alternativen:
    // window.location.replace('dashboard.html')  // ohne History‑Eintrag
    // window.open('', '_self')  // komplett leere about:blank‑Seite
  }, 500)
})
 
</body>
</html>
